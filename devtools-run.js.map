{"version":3,"file":"devtools-run.js","sources":["src/devtools-base.ts","src/devtools-run.ts"],"sourcesContent":["import { options, Component, findDOMNode as IfindDOMNode, findVDom as IfindVDom} from \"./zreact\";\nimport { IKeyValue } from \"./types\";\nimport { IVDom } from \"./vdom/index\";\n\ninterface IReactElement {\n    props?: boolean|IKeyValue;\n    type: any;\n    ref?: ((c: Component<IKeyValue, IKeyValue>|null) => void)|null;\n    key?: string;\n}\ninterface IReactComponent {\n    _currentElement: IReactElement|string|null;\n    node?: Text|Element|Node;\n    _instance?: Component<IKeyValue, IKeyValue>;\n    _renderedComponent?: IReactComponent;\n    forceUpdate?: () => void;\n    getName?: () => void;\n    props?: IKeyValue;\n    setState?: () => void;\n    state?: IKeyValue;\n    _inDevTools?: boolean;\n    _renderedChildren?: IReactComponent[];\n    _stringText?: null|string;\n    _rootID?: string;\n    _component?: any;\n}\n\ndeclare const window: {\n    $zreact: IVDom,\n    __REACT_DEVTOOLS_GLOBAL_HOOK__?: any,\n};\n\ndeclare class Map {\n    public has(key: any): boolean;\n    public get(key: any): any;\n    public set(key: any, val: any): void;\n    public delete(key: any): void;\n}\n\n\nexport function getInitDevTools(opt: typeof options, findDOMNode: typeof IfindDOMNode, findVDom: typeof IfindVDom) {\n\n    /**\n     * 将zreact的component实例转换为React的\n     * @param  component\n     */\n    function createReactElement(component: Component<IKeyValue, IKeyValue>): IReactElement {\n        const element: IReactElement = {\n            key: component._key,\n            props: component.props,\n            ref: null, // Unsupported\n            type: component.constructor,\n        };\n        return element;\n    }\n\n    /**\n     * 获取组件名\n     * @param  element\n     */\n    function typeName(element: IReactElement): string {\n        if (typeof element.type === \"function\") {\n            return element.type.displayName || element.type.name;\n        }\n        return element.type;\n    }\n    /**\n     * 将component转换实例\n     * @param component\n     */\n    function createReactCompositeComponent(component: Component<IKeyValue, IKeyValue>): IReactComponent {\n        const _currentElement = createReactElement(component);\n        const node = findDOMNode(component);\n        const instance: IReactComponent = {\n            _currentElement,\n            _instance: component,\n            forceUpdate: component.forceUpdate && component.forceUpdate.bind(component),\n            getName: function getName() {\n                return typeName(_currentElement);\n            },\n            node,\n            props: component.props,\n            setState: component.setState && component.setState.bind(component),\n            state: component.state,\n        };\n        if (component._component) {\n            instance._renderedComponent = updateReactComponent(component._component);\n        } else if (findVDom(component)) {\n            instance._renderedComponent = updateReactComponent(findVDom(component));\n        }\n        return instance;\n    }\n\n    /**\n     * 将vdom转换为实例\n     * @param vdom\n     */\n    function createReactDOMComponent(vdom: IVDom): IReactComponent {\n        const node = findDOMNode(vdom);\n        const childNodes = node.nodeType === Node.ELEMENT_NODE ?\n            Array.prototype.slice.call(node.childNodes, 0) : [];\n        const isText = node.nodeType === Node.TEXT_NODE;\n        let element: string|IReactElement|null;\n        if (isText) {\n            element = node.textContent;\n        } else {\n            element = {\n                props: vdom.props,\n                type: node.nodeName.toLowerCase(),\n            };\n        }\n        const children: IReactComponent[] = new Array();\n        childNodes.forEach(function _(child: any) {\n            const childVDom = findVDom(child);\n            if (childVDom) {\n                let component: IReactComponent;\n                if (childVDom.component) {\n                    component = updateReactComponent(childVDom.component);\n                } else {\n                    component = updateReactComponent(childVDom);\n                }\n                children.push(component);\n            }\n        })\n        return {\n            _currentElement: element,\n            _inDevTools: false,\n            _renderedChildren: children,\n            _stringText: isText ? node.textContent : null,\n            node,\n        };\n    }\n    const instanceMap = new Map();\n    /**\n     * 将vdom或component转换为实例\n     * @param componentOrVDom\n     */\n    function updateReactComponent(componentOrVDom: any): IReactComponent {\n        const isVDom = findVDom(componentOrVDom) == null;\n        const newInstance = isVDom ? createReactDOMComponent(componentOrVDom) : createReactCompositeComponent(componentOrVDom);\n        if (!isVDom) {\n            console.log(componentOrVDom);\n        }\n        const base: Element | Component<any, any> = isVDom ? findDOMNode(componentOrVDom) : componentOrVDom;\n        if (instanceMap.has(base)) {\n            const inst = instanceMap.get(base);\n            (Object as any).assign(inst, newInstance);\n            return inst;\n        }\n        instanceMap.set(base, newInstance);\n        return newInstance;\n    }\n\n    function nextRootKey(roots: IKeyValue) {\n        return \".\" + Object.keys(roots).length;\n    }\n\n    function findRoots(node: Element, roots: IKeyValue) {\n        Array.prototype.forEach.call(node.childNodes, function _(child: any) {\n            const vdom = findVDom(child);\n            if (vdom && vdom.component) {\n                roots[nextRootKey(roots)] = updateReactComponent(vdom.component);\n            } else {\n                findRoots(child, roots);\n            }\n        });\n    }\n\n    function isRootComponent(component: Component<IKeyValue, IKeyValue>) {\n        if (component._parentComponent) {\n            return false;\n        }\n        const base = findDOMNode(component);\n        const parentElement: any = base && base.parentElement;\n        const vdom = findVDom(parentElement);\n        if (vdom && vdom.props) {\n            return false;\n        }\n        return true;\n    }\n\n    function visitNonCompositeChildren(component: IReactComponent, visitor: (arg: IReactComponent) => void) {\n        if (component._renderedComponent) {\n            if (!component._renderedComponent._component) {\n                visitor(component._renderedComponent);\n                visitNonCompositeChildren(component._renderedComponent, visitor);\n            }\n        } else if (component._renderedChildren) {\n            component._renderedChildren.forEach(function _(child) {\n                visitor(child);\n                if (!child._component) {\n                    visitNonCompositeChildren(child, visitor);\n                }\n            });\n        }\n    }\n\n    function createDevToolsBridge(vdom?: IVDom) {\n        const ComponentTree = {\n            getClosestInstanceFromNode: function getClosestInstanceFromNode(node: any) {\n                while (node && !findVDom(node)) {\n                    node = node.parentNode;\n                }\n                return node ? updateReactComponent(findVDom(node).component) : null;\n            },\n            getNodeFromInstance: function getNodeFromInstance(instance: IReactComponent) {\n                return instance.node;\n            },\n        };\n\n        const roots: {\n            [name: string]: IReactComponent;\n        } = {};\n        if (vdom && vdom.component) {\n            roots[\".0\"] = updateReactComponent(vdom.component);\n        } else {\n            findRoots(document.body, roots);\n        }\n        // findRoots(document.body, roots);\n\n        const Mount = {\n            _instancesByReactRootID: roots,\n            _renderNewRootComponent: function _renderNewRootComponent(arg: IReactComponent){},\n        };\n        const Reconciler = {\n            mountComponent: function mountComponent(arg: IReactComponent){},\n            performUpdateIfNecessary: function performUpdateIfNecessary(){},\n            receiveComponent: function receiveComponent(arg: IReactComponent){},\n            unmountComponent: function unmountComponent(arg: IReactComponent){},\n        };\n        const componentAdded = function componentAdded_(component: Component<IKeyValue, IKeyValue>) {\n            const instance = updateReactComponent(component);\n            if (isRootComponent(component)) {\n                instance._rootID = nextRootKey(roots);\n                roots[instance._rootID] = instance;\n                Mount._renderNewRootComponent(instance);\n            }\n            visitNonCompositeChildren(instance, function _(childInst) {\n                childInst._inDevTools = true;\n                Reconciler.mountComponent(childInst);\n            });\n            Reconciler.mountComponent(instance);\n        };\n        const componentUpdated = function componentUpdated_(component: Component<IKeyValue, IKeyValue>) {\n            const prevRenderedChildren: IReactComponent[] = [];\n            visitNonCompositeChildren(instanceMap.get(component), function _(childInst: IReactComponent) {\n                prevRenderedChildren.push(childInst);\n            });\n            const instance = updateReactComponent(component);\n            Reconciler.receiveComponent(instance);\n            visitNonCompositeChildren(instance, function _(childInst: IReactComponent) {\n                if (!childInst._inDevTools) {\n                    childInst._inDevTools = true;\n                    Reconciler.mountComponent(childInst);\n                } else {\n                    Reconciler.receiveComponent(childInst);\n                }\n            });\n            prevRenderedChildren.forEach(function _(childInst: IReactComponent) {\n                if (childInst.node && !document.body.contains(childInst.node)) {\n                    instanceMap.delete(childInst.node);\n                    Reconciler.unmountComponent(childInst);\n                }\n            });\n        };\n        const componentRemoved = function componentRemoved_(component: Component<IKeyValue, IKeyValue>) {\n            const instance = updateReactComponent(component);\n            visitNonCompositeChildren(instance, function _(childInst) {\n                instanceMap.delete(childInst.node);\n                Reconciler.unmountComponent(childInst);\n            });\n            Reconciler.unmountComponent(instance);\n            instanceMap.delete(component);\n            if (instance._rootID) {\n                delete roots[instance._rootID];\n            }\n        };\n        return {\n            ComponentTree,\n            Mount,\n            Reconciler,\n            componentAdded,\n            componentRemoved,\n            componentUpdated,\n        };\n    }\n\n    return function initDevTools(vdom?: IVDom) {\n        if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ === \"undefined\") {\n            return;\n        }\n        const bridge = createDevToolsBridge(vdom);\n        const nextAfterMount = opt.afterMount;\n        opt.afterMount = (component: Component<IKeyValue, IKeyValue>) => {\n            bridge.componentAdded(component);\n            if (nextAfterMount) {\n                nextAfterMount(component);\n            }\n        };\n        const nextAfterUpdate = opt.afterUpdate;\n        opt.afterUpdate = (component: Component<IKeyValue, IKeyValue>) => {\n            bridge.componentUpdated(component);\n            if (nextAfterUpdate) {\n                nextAfterUpdate(component);\n            }\n        };\n        const nextBeforeUnmount = opt.beforeUnmount;\n        opt.beforeUnmount = (component: Component<IKeyValue, IKeyValue>) => {\n            bridge.componentRemoved(component);\n            if (nextBeforeUnmount) {\n                nextBeforeUnmount(component);\n            }\n        };\n        // Notify devtools about this instance of \"React\"\n        window.__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(bridge);\n        return () => {\n            opt.afterMount = nextAfterMount;\n            opt.afterUpdate = nextAfterUpdate;\n            opt.beforeUnmount = nextBeforeUnmount;\n        };\n    };\n}\n","import { options, findDOMNode, findVDom } from \"zreact\";\nimport { getInitDevTools } from \"./devtools-base\";\n\nconst initDevTools = getInitDevTools(options, findDOMNode, findVDom);\n\ninitDevTools();\n"],"names":["findDOMNode","findVDom","options"],"mappings":"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"}