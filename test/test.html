<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <script src="../dist/zreact.js"></script>
     <!-- <script src="./preact.dev.js"></script> -->
    <title>Document</title>
</head>
<body>
    <div id="app">
    </div>
    <script>
        if (typeof preact !== "undefined")
            var Zreact = preact;
        var Foo = Zreact.createClass({
            state: {
                num: [1,2,3]
            },
            render: function(props, state) {
                var self = this
                var test = state.num.map(function(i, index) {
                    return Zreact.h("li", null, i, Zreact.h("button", { onClick: self["delete"].bind(self, index) }, "x"))
                });
                return Zreact.h("div", null, Zreact.h("ul", null, test), Zreact.h("button", { onClick: this.test.bind(this) }, "添加"));
            },
            test: function() {
                console.log("Foo test", this.state);
                this.setState(function(state) {
                    state.num.push(state.num.length + 1);
                })
            },
            "delete": function(index) {
                this.setState(function(state) {
                    state.num.splice(index, 1);
                })
            }
        })
        var scratch = document.querySelector("#app");
        Zreact.render(Zreact.h(Foo), scratch)
    </script>
</body>
</html>
